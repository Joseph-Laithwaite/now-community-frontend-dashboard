{"remainingRequest":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/src/pages/Dashboard/Layout/Extra/IndependentSelectorMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/src/pages/Dashboard/Layout/Extra/IndependentSelectorMenu.vue","mtime":1606918594796},{"path":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/josephlaithwaite/Documents/VueLearning/NC-vue-laravel-dashboard/vue-material-dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaW5kZXBlbmRlbnRQZXJtaXNzaW9uc2VsZWN0b3InLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0Nsb3NlZDogdHJ1ZSwKICAgICAgaW5kZXBlbmRlbnRQZXJtaXNzaW9uczogW10sCiAgICAgIHNlbGVjdGVkSW5kZXBlbmRlbnQ6IHt9LAogICAgICBwZXJtaXNzaW9uQ291bnQ6IDAsCiAgICB9OwogIH0sCgogIGFzeW5jIGJlZm9yZUNyZWF0ZSgpIHsKICAgIAogICAgLy8gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInByb2ZpbGUvbXlQZXJtaXNzaW9ucyIpOwogICAgdGhpcy5pbmRlcGVuZGVudFBlcm1pc3Npb25zID0gIGF3YWl0IHRoaXMuJHN0b3JlLmdldHRlcnNbInByb2ZpbGUvbXlQZXJtaXNzaW9ucyJdOwogICAgdGhpcy5zZWxlY3RlZEluZGVwZW5kZW50ID0gIGF3YWl0IHRoaXMuJHN0b3JlLmdldHRlcnNbInByb2ZpbGUvY3VycmVudFBlcm1pc3Npb25zIl07CiAgICB0aGlzLnBlcm1pc3Npb25Db3VudCA9ICB0aGlzLmluZGVwZW5kZW50UGVybWlzc2lvbnMubGVuZ3RoOwogIH0sCgogIGNvbXB1dGVkOnsKICAgIHNpbmdsZWluZGVwZW5kZW50UGVybWlzc2lvbnMoKXsKICAgICAgaWYodGhpcy5wZXJtaXNzaW9uQ291bnQ+MSl7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBzZWxlY3RJbmRlcGVuZGVudChwZXJtaXNzaW9uKXsKICAgICAgLy8gdGhpcy5zZWxlY3RlZEluZGVwZW5kZW50ID0gcGVybWlzc2lvbgogICAgICBjb25zb2xlLmxvZygiQWJvdXQgdG8gY2FsbCBzZXRDdXJyZW50UGVybWlzc2lvbnMgZnJvbSBhc3luYyBzZWxlY3RJbmRlcGVuZGVudCIpOwogICAgICBjb25zb2xlLmxvZyhwZXJtaXNzaW9uKTsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInByb2ZpbGUvc2V0Q3VycmVudFBlcm1pc3Npb25zIiwgcGVybWlzc2lvbik7CiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRlcGVuZGVudCA9IGF3YWl0IHRoaXMuJHN0b3JlLmdldHRlcnNbInByb2ZpbGUvY3VycmVudFBlcm1pc3Npb25zIl0KICAgICAgY29uc29sZS5sb2coIk5ld2x5IHNldCBjdXJyZW50IHBlcm1pc3Npb25zIGlzOiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZEluZGVwZW5kZW50KTsKICAgIH0sCiAgICBjbGlja2VkOiBmdW5jdGlvbihlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICB0b2dnbGVNZW51OiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5pc0Nsb3NlZCA9ICF0aGlzLmlzQ2xvc2VkOwogICAgfSwKICAgIGdvVG9Qcm9maWxlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogImluZGVwZW5kZW50UGVybWlzc2lvbnMgUHJvZmlsZSJ9KQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["IndependentSelectorMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IndependentSelectorMenu.vue","sourceRoot":"src/pages/Dashboard/Layout/Extra","sourcesContent":["<template>\n  <div>\n    <sidebar-item \n      v-if=\"typeof selectedIndependent.independent !== 'undefined'\"\n\n      :link=\"{ \n        name:  selectedIndependent.independent.name,\n        image: '' ,\n        icon: 'storefront'\n      }\"\n    >\n      <span v-if=\"permissionCount>1\">\n        <sidebar-item\n          v-for=\"permission in independentPermissions\"\n          :key=\"permission.id\"\n          :link=\"{\n            id: permission.id,\n            name: permission.independent.name,\n            image: permission.independent.logo,\n            icon: 'storefront',\n            path: '',\n            emit: 'select_independent'\n          }\"\n          @select_independent=\"selectIndependent(permission)\"\n        />\n      </span>\n\n      <sidebar-item\n        :link=\"{\n          id: 'addNewIndependent',\n          name: 'Add Independent',\n          image: '',\n          icon: 'add_business',\n          path: {name:'Register Business', hash:'#basicDetails'},\n          emit: 'add_new_independent'\n        }\"\n      />\n    </sidebar-item>\n  </div>\n  <!-- <div class=\"user\">\n    <div class=\"photo\"\n      v-if=\"typeof selectedIndependent.logo == undefined\"\n    >\n      <img \n        :src=\"selectedIndependent.logo\"\n        :alt=\"selectedIndependent.independent.name + ' logo'\" />\n    </div>\n    <a\n      v-else\n      class=\"nav-link sidebar-menu-item\"\n    >\n      <md-icon>\n        storefront\n      </md-icon>\n    </a>\n    <div class=\"user-info\">\n      <a\n        data-toggle=\"collapse\"\n        :aria-expanded=\"!isClosed\"\n        @click.stop=\"toggleMenu\"\n        @click.capture=\"clicked\"\n      >\n        <span>\n          {{ selectedIndependent.independent.name }}\n          <b v-if=\"!singleindependentPermissions\" class=\"caret\"></b>\n        </span>\n      </a>\n\n      <collapse-transition v-if=\"!singleindependentPermissions\">\n        <div v-show=\"!isClosed\">\n          <ul class=\"nav\">\n              <li v-for=\"independentPermissions in independentPermissions\" :key=independentPermissions.id>\n                  <div class=\"photo\">\n                    <img :src=\"independentPermissions.logo\" :alt=\"independentPermissions.independent.name + ' logo'\" />\n                  </div>\n                  <div class=\"user-info\">\n                    <a>\n                      <span>\n                        {{ independentPermissions.independent.name }}\n                      </span>\n                    </a>\n                  </div>\n              </li>\n          </ul>\n        </div>\n      </collapse-transition>\n    </div>\n  </div> -->\n</template>\n<script>\nexport default {\n  name: 'independentPermissionselector',\n  data() {\n    return {\n      isClosed: true,\n      independentPermissions: [],\n      selectedIndependent: {},\n      permissionCount: 0,\n    };\n  },\n\n  async beforeCreate() {\n    \n    // await this.$store.dispatch(\"profile/myPermissions\");\n    this.independentPermissions =  await this.$store.getters[\"profile/myPermissions\"];\n    this.selectedIndependent =  await this.$store.getters[\"profile/currentPermissions\"];\n    this.permissionCount =  this.independentPermissions.length;\n  },\n\n  computed:{\n    singleindependentPermissions(){\n      if(this.permissionCount>1){\n        return false;\n      }else{\n        return true;\n      }\n    },\n  },\n\n  methods: {\n    async selectIndependent(permission){\n      // this.selectedIndependent = permission\n      console.log(\"About to call setCurrentPermissions from async selectIndependent\");\n      console.log(permission);\n      await this.$store.dispatch(\"profile/setCurrentPermissions\", permission);\n      this.selectedIndependent = await this.$store.getters[\"profile/currentPermissions\"]\n      console.log(\"Newly set current permissions is: \");\n      console.log(this.selectedIndependent);\n    },\n    clicked: function(e) {\n      e.preventDefault();\n    },\n    toggleMenu: function() {\n      this.isClosed = !this.isClosed;\n    },\n    goToProfile() {\n      this.$router.push({name: \"independentPermissions Profile\"})\n    },\n  }\n}\n</script>\n<style>\n.collapsed {\n  transition: opacity 1s;\n}\n</style>\n"]}]}